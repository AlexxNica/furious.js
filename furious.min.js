!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.furious=e()}}(function(){return function e(f,o,n){function d(t,u){if(!o[t]){if(!f[t]){var l="function"==typeof require&&require;if(!u&&l)return l(t,!0);if(i)return i(t,!0);throw new Error("Cannot find module '"+t+"'")}var p=o[t]={exports:{}};f[t][0].call(p.exports,function(e){var o=f[t][1][e];return d(o?o:e)},p,p.exports,e,f,o,n)}return o[t].exports}for(var i="function"==typeof require&&require,t=0;t<n.length;t++)d(n[t]);return d}({1:[function(e,f){"use strict";function o(e){if(!(["f32","f64"].indexOf(e)>=0))throw new RangeError("Type "+e+" is not supported");this.type=e,this.size={f32:4,f64:8}[e],this.epsilon={f32:1.1920928955078125e-7,f64:2.220446049250313e-16}[e],this.arrayType={f32:Float32Array,f64:Float64Array}[e]}o.prototype.equals=function(e){return e instanceof o&&this.arrayType===e.arrayType},f.exports=o},{}],2:[function(e,f){"use strict";function o(e){e(this)}var n=e("./NDArray"),d=e("./DataType"),i=e("./util"),t=e("./jsmath");o.prototype.empty=function(e,f){return this.zeros(e,f)},o.prototype.zeros=function(e,f){e=i.checkShape(e),f="undefined"==typeof f?new d("f64"):i.checkDataType(f);var o=new n(e,f,this);return o._data=new f.arrayType(o.length),o},o.prototype.ones=function(e,f){var o=this.zeros(e,f);return t.fill(o._data,1),o},o.prototype.array=function(e,f){f="undefined"==typeof f?new d("f64"):i.checkDataType(f);var o=[];i.discoverArrayShapeRecursive(e,o,0);var n=this.empty(o,f);return i.copyArrayDataRecursive(n._data,e,o,0,0),n},o.prototype._invalidate=function(e){i.checkNDArray(e,"array"),e._data=null},o.prototype.get=function(){if(0===arguments.length)throw new Error("Callback argument missing");var e=arguments[arguments.length-1];if(1===arguments.length)throw new Error("At least one NDArray argument expected");for(var f=0;f<arguments.length-1;++f)i.checkNDArray(arguments[f],"argument "+f);for(var f=0;f<arguments.length-1;++f)arguments[f]._decRef();for(var o=new Array(arguments.length-1),f=0;f<o.length;++f){var n=arguments[f];if(0===n.shape.length)o[f]=n._data[0];else{var d=new Array(n.shape[0]);i.createArrayRecursive(n._data,d,n.shape,0,0),o[f]=d}}for(var f=0;f<arguments.length-1;++f)arguments[f]._tryInvalidate();e.apply(null,o)},o.prototype.reshape=function(e,f){if(f=i.checkShape(f),i.computeLength(f)!==e.length)throw new RangeError("The shape is not compatible with the array");var o=new n(f,e.dataType,this);return e._decRef()?(o._data=new o.dataType.arrayType(o.length),o._data.set(e._data)):(o._data=e._data,e._tryInvalidate()),o},o.prototype.repeat=function(e,f,o,n){i.checkNDArray(e,"a"),f=i.checkRepeats(f),o=i.checkAxis(o,e.shape.length);var d=e.shape,u=d.slice(0);u[o]*=f,e._decRef();try{"undefined"==typeof n?n=this.empty(u,e.dataType):(i.checkNDArray(n,"out"),i.checkShapesCompatibility(n.shape,u),i.checkDataTypesCompatibility(e.dataType,n.dataType),n._incRef());var l=i.computeOuterStride(d,o),p=i.computeInnerStride(d,o);t.repeat(e._data,n._data,l,p,d[o],f)}catch(s){throw e._incRef(),s}return e._tryInvalidate(),n};var u=function(e,f,o,d,t,u,l){var p=null,s=null;if(e instanceof n){if(p=e.shape,s=e.dataType,f instanceof n)i.checkShapesCompatibility(e.shape,f.shape),i.checkDataTypesCompatibility(e.dataType,f.dataType);else if(!i.isNumber(f))throw new TypeError("Unsupported type of b")}else{if(!i.isNumber(e))throw new TypeError("Unsupported type of a");p=f.shape,s=f.dataType,i.checkNDArray(f,"b")}e instanceof n&&e._decRef(),f instanceof n&&f._decRef();try{"undefined"==typeof o?(o=new n(p,s,d),o._data=e instanceof n&&!e._hasRefs()?e._data:f instanceof n&&!f._hasRefs()?f._data:new s.arrayType(o.length)):(i.checkNDArray(o,"out"),i.checkShapesCompatibility(p,o.shape),i.checkDataTypesCompatibility(s,o.dataType),o._incRef()),e instanceof n?f instanceof n?t(e._data,f._data,o._data):u(e._data,+f,o._data):l(f._data,+e,o._data)}catch(y){throw e instanceof n&&e._incRef(),f instanceof n&&f._incRef(),y}return e instanceof n&&e._tryInvalidate(),f instanceof n&&f._tryInvalidate(),o},l=function(e,f,o,d){i.checkNDArray(e,"a"),e._decRef();try{"undefined"==typeof f?(f=new n(e.shape,e.dataType,o),f._data=e instanceof n&&!e._hasRefs()?e._data:new e.dataType.arrayType(f.length)):(i.checkNDArray(f,"out"),i.checkShapesCompatibility(e.shape,f.shape),i.checkDataTypesCompatibility(e.dataType,f.dataType),f._incRef()),d(e._data,f._data)}catch(t){throw e._incRef(),t}return e._tryInvalidate(),f},p=function(e,f,o,n,d,t){if(i.checkNDArray(e,"a"),"undefined"==typeof f)return"undefined"==typeof o?o=n.empty([],e.dataType):(i.checkNDArray(o,"out"),i.checkShapesCompatibility([],o.shape),i.checkDataTypesCompatibility(e.dataType,o.dataType),o._incRef()),d(e._data,o._data),e._tryRelease(),o;f=i.checkAxis(f,e.shape.length);var u=i.computeAxisReductionOutShape(e.shape,f);if("undefined"==typeof o)var o=n.empty(u,e.dataType);else i.checkNDArray(o,"out"),i.checkShapesCompatibility([],o.shape),i.checkDataTypesCompatibility(e.dataType,o.dataType),o._incRef();return t(e._data,o._data,i.computeOuterStride(e.shape,f),i.computeInnerStride(e.shape,f),e.shape[f]),e._tryRelease(),o};o.prototype.add=function(e,f,o){return u(e,f,o,this,t.add,t.addConst,t.addConst)},o.prototype.sub=function(e,f,o){return u(e,f,o,this,t.sub,t.subConst,t.subRevConst)},o.prototype.mul=function(e,f,o){return u(e,f,o,this,t.mul,t.mulConst,t.mulConst)},o.prototype.div=function(e,f,o){return u(e,f,o,this,t.div,t.divConst,t.divRevConst)},o.prototype.min=function(e,f,o){return p(e,f,o,this,t.min,t.axisMin)},o.prototype.max=function(e,f,o){return p(e,f,o,this,t.max,t.axisMax)},o.prototype.sum=function(e,f,o){return p(e,f,o,this,t.sum,t.axisSum)},o.prototype.neg=function(e,f){return l(e,f,this,t.neg)},o.prototype.abs=function(e,f){return l(e,f,this,t.abs)},o.prototype.exp=function(e,f){return l(e,f,this,t.exp)},o.prototype.log=function(e,f){return l(e,f,this,t.log)},o.prototype.sqrt=function(e,f){return l(e,f,this,t.sqrt)},o.prototype.square=function(e,f){return l(e,f,this,t.square)},o.prototype.dot=function(e,f,o){i.checkNDArray(e,"a"),i.checkNDArray(f,"b"),i.checkDataTypesCompatibility(e.dataType,f.dataType);var d=Math.max(e.shape.length-1,0),u=Math.max(f.shape.length-2,0),l=e.shape[d];if(l!==f.shape[u])throw new RangeError("Arrays have incompatible reduction dimensions");for(var p=[],s=1,y=1,c=1,r=0;d>r;r++)p.push(e.shape[r]),s*=e.shape[r];for(var r=0;r<f.shape.length;r++){var a=f.shape[r];u>r?(y*=a,p.push(a)):r>u&&(c*=a,p.push(a))}return"undefined"==typeof o?o=this.empty(p,e.dataType):o instanceof n&&(i.checkNDArray(o,"out"),i.checkShapesCompatibility(o.shape,p),i.checkDataTypesCompatibility(o.dataType,e.dataType),i.checkDifferentNDArrays(e,o,"a","out"),i.checkDifferentNDArrays(f,o,"b","out"),o._incRef()),t.dot(e._data,f._data,o._data,s,y,c,l),e._tryRelease(),f._tryRelease(),o},o.prototype.linspace=function(e,f,o,n){if(!i.isReal(e))throw new TypeError(e+" is not a real number");if(!i.isReal(f))throw new TypeError(f+" is not a real number");if("undefined"==typeof o)o=50;else{if(!i.isInt(o))throw new TypeError(o+" is not an integer");if(0>=o)throw new RangeError("The number of samples must be positive")}if("undefined"==typeof n&&(n=!0),n&&1===o)throw new RangeError("The number of samples must be a least 2 (for start and end points)");for(var t=this.empty(o,new d("f64")),u=t._data,l=f-e,p=n?o-1:o,s=l/p,y=0;o>y;y++)u[y]=e+s*y;return t},f.exports=o},{"./DataType":1,"./NDArray":3,"./jsmath":7,"./util":8}],3:[function(e,f){"use strict";function o(e){for(var f=1,o=0;o<e.length;o++)f*=e[o];return f}function n(e,f,n){if("undefined"==typeof n)throw new Error("Context not defined");if(!d.isPositiveIntArray(e)&&!d.isPositiveInt(e))throw new TypeError(e+" is not a valid array shape");if("undefined"==typeof f)f=new i("f64");else if(!(f instanceof i))throw new TypeError(f+" is not an instance of DataType");this.shape=d.asIntArray(e),this.dataType=f,this._context=n,this.length=o(this.shape),this._lockCount=0,this._refCount=1,this._isValid=!0}var d=e("./util"),i=e("./DataType");n.prototype.lock=function(){if(!this.isValid())throw new Error("Attempted to lock an invalidated array");return this._lockCount++,this},n.prototype.unlock=function(){if(!this.isLocked())throw new Error("Attempted to lock a unlocked array");return this._lockCount--,this},n.prototype.isLocked=function(){return this._lockCount>0},n.prototype.retain=function(){if(!this.isValid())throw new Error("Attempted to release an invalidated array");if(this.isLocked())throw new Error("Attempted to retain a locked array");return this._refCount++,this},n.prototype.release=function(){if(!this.isValid())throw new Error("Attempted to release an invalidated array");if(this.isLocked())throw new Error("Attempted to release a locked array");return 0===--this._refCount&&this._context._invalidate(this),this},n.prototype.tryRelease=function(){if(!this.isValid())throw new Error("Attempted to release an invalidated array");return this.isLocked()||0===--this._refCount&&this._context._invalidate(this),this},n.prototype._tryRelease=function(){return this.isLocked()||0===--this._refCount&&this._context._invalidate(this),this},n.prototype.invalidate=function(){return this.isValid()&&(this._context._invalidate(this),this._isValid=!1,this._refCount=0,this._lockCount=0),this},n.prototype.isValid=function(){return this._isValid},n.prototype._decRef=function(){return 0===this._lockCount&&--this._refCount,0!==this._refCount},n.prototype._incRef=function(){return 0===this._lockCount&&++this._refCount,this},n.prototype._hasRefs=function(){return 0!==this._lockCount||0!==this._refCount},n.prototype._tryInvalidate=function(){return this.isValid()&&!this._hasRefs()?(this._context._invalidate(this),this._isValid=!1,!0):!1},n.prototype.add=function(e){return this._context.add(this,e)},n.prototype.sub=function(e){return this._context.sub(this,e)},n.prototype.mul=function(e){return this._context.mul(this,e)},n.prototype.div=function(e){return this._context.div(this,e)},n.prototype.min=function(e){return this._context.min(this,e)},n.prototype.max=function(e){return this._context.max(this,e)},n.prototype.sum=function(e){return this._context.sum(this,e)},n.prototype.reshape=function(e){return this._context.reshape(this,e)},n.prototype.repeat=function(e,f){return this._context.repeat(this,e,f)},n.prototype.get=function(e){this._context.get(this,e)},f.exports=n},{"./DataType":1,"./util":8}],4:[function(e,f){"use strict";function o(e){var f=this;this._pnaclObject=document.createElement("object"),this._pnaclObject.width=0,this._pnaclObject.height=0,this._pnaclObject.data=u+"furious.nmf",this._pnaclObject.type="application/x-pnacl",this._pnaclObject.addEventListener("load",function(){var o=i.newMessageId();a[o]=function(){e(f)},f._pnaclObject.postMessage({id:o,command:"init"})},!0),this._pnaclObject.addEventListener("message",w,!0),document.body.appendChild(this._pnaclObject)}var n=e("./NDArray"),d=e("./DataType"),i=e("./allocator"),t=e("./util"),u="";try{for(var l=document.getElementsByTagName("script"),p=l.length-1;p>=0;--p){var s=l[p].src;s=s.split("?")[0];var y=s.lastIndexOf("/"),c=s.substring(y+1);if("furious.js"===c||"furious.min.js"===c){u=s.substring(0,y+1);break}}}catch(r){}var a={},w=function(e){var f=e.data,o=f.id;"error"==f.status&&console.log("Error: "+f.description),o in a&&("buffer"in f?a[o](f.buffer):a[o](),delete a[o])};o.prototype.empty=function(e,f){if(e=t.checkShape(e),"undefined"==typeof f)f=new d("f64");else if(!(f instanceof d))throw new TypeError(f+" is not an instance of DataType");var o=new n(e,f,this);return o._id=i.newArrayId(),this._pnaclObject.postMessage({id:i.newMessageId(),command:"empty",shape:new Uint32Array(e).buffer,datatype:f.type,out:o._id}),o},o.prototype.zeros=function(e,f){if(e=t.checkShape(e),"undefined"==typeof f)f=new d("f64");else if(!(f instanceof d))throw new TypeError(f+" is not an instance of DataType");var o=new n(e,f,this);return o._id=i.newArrayId(),this._pnaclObject.postMessage({id:i.newMessageId(),command:"zeros",shape:new Uint32Array(e).buffer,datatype:f.type,out:o._id}),o},o.prototype.ones=function(e,f){if(e=t.checkShape(e),"undefined"==typeof f)f=new d("f64");else if(!(f instanceof d))throw new TypeError(f+" is not an instance of DataType");var o=new n(e,f,this);return o._id=i.newArrayId(),this._pnaclObject.postMessage({id:i.newMessageId(),command:"ones",shape:new Uint32Array(e).buffer,datatype:f.type,out:o._id}),o},o.prototype.array=function(e,f){var o=[];if(t.discoverArrayShapeRecursive(e,o,0),"undefined"==typeof f)f=new d("f64");else if(!(f instanceof d))throw new TypeError(f+" is not an instance of DataType");var u=new n(o,f,this);u._id=i.newArrayId();var l=new f.arrayType(u.length);return t.copyArrayDataRecursive(l,e,o,0,0),this._pnaclObject.postMessage({id:i.newMessageId(),command:"array",shape:new Uint32Array(o).buffer,datatype:f.type,buffer:l.buffer,out:u._id}),u},o.prototype.linspace=function(e,f,o,u){if(!t.isReal(e))throw new TypeError(e+" is not a real number");if(!t.isReal(f))throw new TypeError(f+" is not a real number");if("undefined"==typeof o)o=50;else{if(!t.isInt(o))throw new TypeError(o+" is not an integer");if(0>=o)throw new RangeError("The number of samples must be positive")}if("undefined"==typeof u&&(u=!0),u&&1===o)throw new RangeError("The number of samples must be a least 2 (for start and end points)");var l=new d("f64"),p=new n([o],l,this);return p._id=i.newArrayId(),this._pnaclObject.postMessage({id:i.newMessageId(),command:"linspace",start:+e,stop:+f,samples:0|o,closed:!!u,datatype:l.type,out:p._id}),p},o.prototype.reshape=function(e,f){if(t.checkNDArray(e,"a"),f=t.checkShape(f),t.computeLength(f)!==e.length)throw new RangeError("The shape is not compatible with the array");var o=!e._decRef(),d=new n(f,e.dataType,this);return o?(d._id=e._id,o=!1):d._id=i.newArrayId(),this._pnaclObject.postMessage({id:i.newMessageId(),command:"reshape",a:o?-e._id:e._id,out:d._id,shape:new Uint32Array(f).buffer}),d},o.prototype.repeat=function(e,f,o,d){t.checkNDArray(e,"a"),f=t.checkRepeats(f),o=t.checkAxis(o,e.shape.length);var u=e.shape,l=u.slice(0);l[o]*=f,"undefined"==typeof d?(d=new n(l,e.dataType,this),d._id=i.newArrayId()):(t.checkNDArray(d,"out"),t.checkShapesCompatibility(d.shape,l),t.checkDataTypesCompatibility(e.dataType,d.dataType),d._incRef());var p=!e._decRef();return this._pnaclObject.postMessage({id:i.newMessageId(),command:"repeat",a:p?-e._id:e._id,out:d._id,repeats:f,axis:o}),d},o.prototype._invalidate=function(e){0!==e._id&&this._pnaclObject.postMessage({id:i.newMessageId(),command:"free","in":e._id})},o.prototype.get=function(){if(0===arguments.length)throw new Error("Callback argument missing");var e=arguments[arguments.length-1];if(1===arguments.length)throw new Error("At least one NDArray argument expected");for(var f=0;f<arguments.length-1;++f)t.checkNDArray(arguments[f],"argument "+f);for(var o=new Array(arguments.length-1),f=0;f<arguments.length-1;++f)o[f]=!arguments[f]._decRef();for(var n=arguments.length-1,d=new Array(n),f=0;n>f;f++){var u=arguments[f],l=i.newMessageId();a[l]=0===u.shape.length?function(f,o){return function(i){var t=new o(i);d[f]=t[0],0===--n&&e.apply(null,d)}}(f,u.dataType.arrayType):function(f,o,i){return function(u){var l=new Array(i[0]);t.createArrayRecursive(new o(u),l,i,0,0),d[f]=l,0===--n&&e.apply(null,d)}}(f,u.dataType.arrayType,u.shape),this._pnaclObject.postMessage({id:l,command:"get","in":o[f]?-u._id:u._id})}};var b=function(e,f,o,d,u){var l=null,p=null,s=!1,y=!1;if(e instanceof n){if(l=e.shape,p=e.dataType,f instanceof n)t.checkShapesCompatibility(e.shape,f.shape),t.checkDataTypesCompatibility(e.dataType,f.dataType);else if(!t.isNumber(f))throw new TypeError("Unsupported type of b")}else{if(!t.isNumber(e))throw new TypeError("Unsupported type of a");l=f.shape,p=f.dataType,t.checkNDArray(f,"b")}e instanceof n&&(s=!e._decRef()),f instanceof n&&(y=!f._decRef());try{"undefined"==typeof o?(o=new n(l,p,d),s?(o._id=e._id,s=!1):y?(o._id=f._id,y=!1):o._id=i.newArrayId()):(t.checkNDArray(o,"out"),t.checkShapesCompatibility(l,o.shape),t.checkDataTypesCompatibility(p,o.dataType),o._incRef()),d._pnaclObject.postMessage(e instanceof n?f instanceof n?{id:i.newMessageId(),command:u,a:s?-e._id:e._id,b:y?-f._id:f._id,out:o._id}:{id:i.newMessageId(),command:u+"c",a:s?-e._id:e._id,b:f,out:o._id}:"add"==u||"mul"==u?{id:i.newMessageId(),command:u+"c",a:y?-f._id:f._id,b:e,out:o._id}:{id:i.newMessageId(),command:"r"+u+"c",a:f,b:s?-e._id:e._id,out:o._id})}catch(c){throw e instanceof n&&e._incRef(),f instanceof n&&f._incRef(),c}return o},m=function(e,f,o,d){t.checkNDArray(e,"a");var u=!e._decRef();try{"undefined"==typeof f?(f=new n(e.shape,e.dataType,o),u?(f._id=e._id,u=!1):f._id=i.newArrayId()):(t.checkNDArray(f,"out"),t.checkShapesCompatibility(e.shape,f.shape),t.checkDataTypesCompatibility(e.dataType,f.dataType),f._incRef())}catch(l){throw e._incRef(),l}return o._pnaclObject.postMessage({id:i.newMessageId(),command:d,a:u?-e._id:e._id,out:f._id}),f},g=function(e,f,o,d){t.checkNDArray(e,"a");var u=!e._decRef();try{"undefined"==typeof f?(f=new n([],e.dataType,o),f._id=i.newArrayId()):(t.checkNDArray(f,"out"),t.checkShapesCompatibility(f.shape,[]),t.checkDataTypesCompatibility(e.dataType,f.dataType),f._incRef())}catch(l){throw e._incRef(),l}return o._pnaclObject.postMessage({id:i.newMessageId(),command:d,a:u?-e._id:e._id,out:f._id}),f},x=function(e,f,o,d,u){t.checkNDArray(e,"a");var l=!e._decRef();try{t.checkAxis(f),"undefined"==typeof o?(o=new n(t.computeAxisReductionOutShape(e.shape,f),e.dataType,d),o._id=i.newArrayId()):(t.checkNDArray(o,"out"),t.checkShapesCompatibility(o.shape,[]),t.checkDataTypesCompatibility(e.dataType,o.dataType),o._incRef())}catch(p){throw e._incRef(),p}return d._pnaclObject.postMessage({id:i.newMessageId(),command:u,a:l?-e._id:e._id,axis:0|f,out:o._id}),o},j=function(e,f,o,d){t.checkNDArray(e,"a"),t.checkNDArray(f,"b"),t.checkDataTypesCompatibility(e.dataType,f.dataType);var u=!e._decRef(),l=!f._decRef();try{if("undefined"==typeof o){var p=e.shape,s=f.shape,y=Math.max(p.length-1,0),c=Math.max(s.length-2,0);if(p[y]!=s[c])throw new TypeError("Mismatch in reduction dimensions");for(var r=[],a=0;y>a;a++)r.push(p[a]);if(s.length>1){for(var a=0;c>a;a++)r.push(s[a]);r.push(s[s.length-1])}o=new n(r,e.dataType,d),o._id=i.newArrayId()}else if(o instanceof n)throw t.checkNDArray(o,"out"),t.checkDataTypesCompatibility(e.dataType,o.dataType),new Error("Not implemented")}catch(w){throw e._incRef(),f._incRef(),w}return d._pnaclObject.postMessage({id:i.newMessageId(),command:"dot",a:u?-e._id:e._id,b:l?-f._id:f._id,out:o._id}),o};o.prototype.add=function(e,f,o){return b(e,f,o,this,"add")},o.prototype.sub=function(e,f,o){return b(e,f,o,this,"sub")},o.prototype.mul=function(e,f,o){return b(e,f,o,this,"mul")},o.prototype.div=function(e,f,o){return b(e,f,o,this,"div")},o.prototype.neg=function(e,f){return m(e,f,this,"neg")},o.prototype.abs=function(e,f){return m(e,f,this,"abs")},o.prototype.exp=function(e,f){return m(e,f,this,"exp")},o.prototype.log=function(e,f){return m(e,f,this,"log")},o.prototype.sqrt=function(e,f){return m(e,f,this,"sqrt")},o.prototype.square=function(e,f){return m(e,f,this,"square")},o.prototype.min=function(e,f){if("undefined"==typeof f)return g(e,void 0,this,"min");if(t.isInt(f))return x(e,f,void 0,this,"amin");throw new TypeError("Unsupported axis type")},o.prototype.max=function(e,f){if("undefined"==typeof f)return g(e,void 0,this,"max");if(t.isInt(f))return x(e,f,void 0,this,"amax");throw new TypeError("Unsupported axis type")},o.prototype.sum=function(e,f){if("undefined"==typeof f)return g(e,void 0,this,"sum");if(t.isInt(f))return x(e,f,void 0,this,"asum");throw new TypeError("Unsupported axis type")},o.prototype.dot=function(e,f,o){return j(e,f,o,this)},f.exports=o},{"./DataType":1,"./NDArray":3,"./allocator":5,"./util":8}],5:[function(e,f,o){"use strict";var n=1,d=1;o.newMessageId=function(){var e=n;return n=n+1|0,e},o.newArrayId=function(){var e=d;return d=d+1|0,e}},{}],6:[function(e,f,o){"use strict";var n=e("./DataType"),d=e("./JSContext"),i=e("./PNaClContext"),t=e("./webcl/WebCLContext"),u=function(e,f){if("undefined"==typeof f&&(f=e,e=void 0),"undefined"==typeof e&&(e=l()),"javascript"==e)return new d(f);if("pnacl"==e)return new i(f);if("webcl"==e)return new t(f);throw new Error("Unsupported backend: "+e)},l=function(){return s("webcl")?"webcl":s("pnacl")?"pnacl":"javascript"},p=function(){var e=[];return s("webcl")&&e.push("webcl"),s("pnacl")&&e.push("pnacl"),s("asm.js")&&e.push("asm.js"),e.push("javascript"),e},s=function(f){switch(f){case"asm.js":try{var o=window.navigator.userAgent,n=o.split(/\s+/),d=/[Ff]irefox\/(\d+)/g;for(var i in n){var t=d.exec(i);if(null!==t){var u=parseInt(t[0]);return u>=29}}return!1}catch(l){}return!1;case"simd.js":return"undefined"!=typeof SIMD;case"webgl":try{var p=document.createElement("canvas");try{if(null!==p.getContext("webgl"))return!0}catch(l){}try{if(null!==p.getContext("experimental-webgl"))return!0}catch(l){}}catch(l){}return!1;case"webcl":if("undefined"!=typeof webcl)try{var s=webcl.getPlatforms();return s.length>=1}catch(l){return!1}else try{var y=e("node-webcl"),s=y.getPlatforms();return s.length>=1}catch(l){return!1}return!1;case"pnacl":try{return"undefined"!=typeof navigator.mimeTypes["application/x-pnacl"]}catch(l){}return!1;case"nacl":try{return"undefined"!=typeof navigator.mimeTypes["application/x-nacl"]}catch(l){}return!1;default:throw new Error("Unknown feature: "+f)}};o.init=u,o.hasFeature=s,o.getDefaultBackend=l,o.getSupportedBackends=p,o.DataType=n},{"./DataType":1,"./JSContext":2,"./PNaClContext":4,"./webcl/WebCLContext":9}],7:[function(e,f,o){"use strict";o.fill=function(e,f){for(var o=e.length,n=0;o>n;++n)e[n]=f},o.add=function(e,f,o){for(var n=o.length,d=0;n>d;++d)o[d]=e[d]+f[d]},o.addConst=function(e,f,o){for(var n=o.length,d=0;n>d;++d)o[d]=e[d]+f},o.sub=function(e,f,o){for(var n=o.length,d=0;n>d;++d)o[d]=e[d]-f[d]},o.subConst=function(e,f,o){for(var n=o.length,d=0;n>d;++d)o[d]=e[d]-f},o.subRevConst=function(e,f,o){for(var n=o.length,d=0;n>d;++d)o[d]=f-e[d]},o.mul=function(e,f,o){for(var n=o.length,d=0;n>d;++d)o[d]=e[d]*f[d]},o.mulConst=function(e,f,o){for(var n=o.length,d=0;n>d;++d)o[d]=e[d]*f},o.div=function(e,f,o){for(var n=o.length,d=0;n>d;++d)o[d]=e[d]/f[d]},o.divConst=function(e,f,o){for(var n=o.length,d=0;n>d;++d)o[d]=e[d]/f},o.divRevConst=function(e,f,o){for(var n=o.length,d=0;n>d;++d)o[d]=f/e[d]},o.neg=function(e,f){for(var o=f.length,n=0;o>n;++n)f[n]=-e[n]},o.abs=function(e,f){for(var o=f.length,n=0;o>n;++n)f[n]=Math.abs(e[n])},o.exp=function(e,f){for(var o=f.length,n=0;o>n;++n)f[n]=Math.exp(e[n])},o.log=function(e,f){for(var o=f.length,n=0;o>n;++n)f[n]=Math.log(e[n])},o.sqrt=function(e,f){for(var o=f.length,n=0;o>n;++n)f[n]=Math.sqrt(e[n])},o.square=function(e,f){for(var o=f.length,n=0;o>n;++n){var d=e[n];f[n]=d*d}},o.min=function(e,f){for(var o=e.length,n=e[0],d=1;o>d;++d)n=Math.min(n,e[d]);f[0]=n},o.max=function(e,f){for(var o=e.length,n=e[0],d=1;o>d;++d)n=Math.max(n,e[d]);f[0]=n},o.sum=function(e,f){for(var o=e.length,n=0,d=0;o>d;++d)n+=e[d];f[0]=n},o.axisMin=function(e,f,o,n,d){for(var i=0;o>i;++i)for(var t=0;n>t;++t){for(var u=i*d*n+t,l=e[u],p=1;d>p;++p)u+=n,l=Math.min(l,e[u]);f[i*n+t]=l}},o.axisMax=function(e,f,o,n,d){for(var i=0;o>i;++i)for(var t=0;n>t;++t){for(var u=i*d*n+t,l=e[u],p=1;d>p;++p)u+=n,l=Math.max(l,e[u]);f[i*n+t]=l}},o.axisSum=function(e,f,o,n,d){for(var i=0;o>i;++i)for(var t=0;n>t;++t){for(var u=i*d*n+t,l=e[u],p=1;d>p;++p)u+=n,l+=e[u];f[i*n+t]=l}},o.dot=function(e,f,o,n,d,i,t){for(var u=0;n>u;++u)for(var l=0;t>l;++l)for(var p=0;d>p;++p)for(var s=0;i>s;++s)o[(u*d+p)*i+s]+=e[u*t+l]*f[(p*t+l)*i+s]},o.repeat=function(e,f,o,n,d,i){if(i>n)for(var t=0;o>t;++t)for(var u=0;d>u;++u)for(var l=0;n>l;++l)for(var p=e[(t*d+u)*n+l],s=0;i>s;++s)f[((t*d+u)*i+s)*n+l]=p;else for(var t=0;o>t;++t)for(var u=0;d>u;++u)for(var y=e.subarray((t*d+u)*n,(t*d+u+1)*n),s=0;i>s;++s)f.set(y,((t*d+u)*i+s)*n)}},{}],8:[function(e,f,o){"use strict";var n=function(e){return e===+e};o.isNumber=n;var d=function(e){return e===+e&&isFinite(e)};o.isReal=d;var i=function(e){return e===(0|e)};o.isInt=i,o.isPositiveInt=function(e){return e===+e&&e===(0|e)&&e>0},o.isNonNegativeInt=function(e){return e===+e&&e===(0|e)&&e>=0};var t=function(e){return e instanceof Array};o.isArray=t,o.isIntArray=function(e){if(o.isArray(e)){for(var f=0;f<e.length;f++)if(!o.isInt(e[f]))return!1;return!0}return!1},o.isPositiveIntArray=function(e){if(o.isArray(e)){for(var f=0;f<e.length;f++)if(!o.isPositiveInt(e[f]))return!1;return!0}return!1},o.asIntArray=function(e){if(o.isInt(e))return[e];if(o.isIntArray(e))return e;throw new TypeError(e+" can not be converted to integer array")};var u=function(e){if(n(e))return u([e]);if(t(e)){for(var f=e.length,o=new Array(f),d=0;f>d;d++){if(!n(e[d]))throw new Error("Shape has non-numeric dimensions");if(!i(e[d]))throw new Error("Shape must have integer dimensions");if(e[d]<1)throw new Error("Degenerate shape");o[d]=0|e[d]}return o}};o.checkShape=u,o.checkShapesCompatibility=function(e,f){if(e.length!=f.length)throw new Error("The shapes have different dimensions");for(var o=e.length,n=0;o>n;n++)if(e[n]!=f[n])throw new Error("The shapes are different")},o.computeLength=function(e){for(var f=1,o=0;o<e.length;++o)f*=e[o];return f},o.checkDataType=function(f){var o=e("./DataType");if(!(f instanceof o))throw new TypeError("dataType is not an instance of DataType");return f},o.checkDataTypesCompatibility=function(e,f){if(!e.equals(f))throw new Error("The data types are not compatible")},o.checkNDArray=function(f,o){var n=e("./NDArray");if(!(f instanceof n))throw new TypeError(o+" is not an NDArray");if(!f.isValid())throw new Error(o+" is an invalidated array")},o.checkDifferentNDArrays=function(e,f,o,n){if(e===f)throw new Error("The arrays "+o+" and "+n+" must be different")},o.checkRepeats=function(e){if(!i(e))throw new TypeError("Repeats is not an integer");if(1>=e)throw new RangeError("Repeats should be greater than 1");return 0|e},o.checkAxis=function(e,f){if(!i(e))throw new TypeError("Axis is not an integer");if(0>e)throw new RangeError("Axis is negative");if(e>=f)throw new RangeError("Axis out of range");return 0|e},o.checkAxisReductionOutShape=function(e,f,o){if(e.length!==f.length+1)throw new Error("Output array has invalid number of dimensions for this operation");for(var n=0;o>n;++n)if(e[n]!==f[n])throw new Error("Output array has invalid shape for this operation");for(var n=o+1;n<e.length;++n)if(e[n]!==f[n-1])throw new Error("Output array has invalid shape for this operation")},o.computeAxisReductionOutShape=function(e,f){for(var o=[],n=0;n<e.length;++n)n!==f&&o.push(e[n]);return o},o.computeOuterStride=function(e,f){for(var o=1,n=0;f>n;++n)o*=e[n];return o},o.computeInnerStride=function(e,f){for(var o=1,n=f+1;n<e.length;++n)o*=e[n];return o};var l=function(e,f,o){if(t(e)){if(f.length<=o)f.push(e.length);else if(f[o]!=e.length)throw new RangeError("Sub-array "+e+" does not match the expected dimension of "+f[o]);for(var d=0;d<e.length;d++)l(e[d],f,o+1)}else{if(o!=f.length)throw new RangeError("Sub-array ["+e+"] does not match the expected dimension of "+f[o]);if(!n(e))throw new TypeError("Non-numeric element: "+e)}};o.discoverArrayShapeRecursive=l;var p=function(e,f,o,n,d){var i=o[n];if(n===o.length-1)e.set(f,d*i);else for(var t=0;i>t;t++)p(e,f[t],o,n+1,d*i+t)};o.copyArrayDataRecursive=p;var s=function(e,f,o,n,d){var i=o[n];if(n===o.length-1)for(var t=0;i>t;t++)f[t]=e[d*i+t];else for(var t=0;i>t;t++)f[t]=new Array(o[n+1]),s(e,f[t],o,n+1,d*i+t)};o.createArrayRecursive=s},{"./DataType":1,"./NDArray":3}],9:[function(e,f){"use strict";function o(f){if("undefined"==typeof p&&(p=e("node-webcl")),null===s){var o="kernel void setF32(\r\n	uint length,\r\n	global float* out,\r\n	float value)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = value;\r\n	}\r\n}\r\nkernel void setF64(\r\n	uint length,\r\n	global double* out,\r\n	double value)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = value;\r\n	}\r\n}\r\n\r\nkernel void addF32(\r\n	uint length,\r\n	global float* a,\r\n	global float* b,\r\n	global float* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] + b[id];\r\n	}\r\n}\r\nkernel void addF64(\r\n	uint length,\r\n	global double* a,\r\n	global double* b,\r\n	global double* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] + b[id];\r\n	}\r\n}\r\nkernel void subF32(\r\n	uint length,\r\n	global float* a,\r\n	global float* b,\r\n	global float* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] - b[id];\r\n	}\r\n}\r\nkernel void subF64(\r\n	uint length,\r\n	global double* a,\r\n	global double* b,\r\n	global double* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] - b[id];\r\n	}\r\n}\r\nkernel void mulF32(\r\n	uint length,\r\n	global float* a,\r\n	global float* b,\r\n	global float* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] * b[id];\r\n	}\r\n}\r\nkernel void mulF64(\r\n	uint length,\r\n	global double* a,\r\n	global double* b,\r\n	global double* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] * b[id];\r\n	}\r\n}\r\nkernel void divF32(\r\n	uint length,\r\n	global float* a,\r\n	global float* b,\r\n	global float* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] / b[id];\r\n	}\r\n}\r\nkernel void divF64(\r\n	uint length,\r\n	global double* a,\r\n	global double* b,\r\n	global double* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] / b[id];\r\n	}\r\n}\r\nkernel void addConstF32(\r\n	uint length,\r\n	global float* a,\r\n	float b,\r\n	global float* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] + b;\r\n	}\r\n}\r\nkernel void addConstF64(\r\n	uint length,\r\n	global double* a,\r\n	double b,\r\n	global double* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] + b;\r\n	}\r\n}\r\nkernel void subConstF32(\r\n	uint length,\r\n	global float* a,\r\n	float b,\r\n	global float* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] - b;\r\n	}\r\n}\r\nkernel void subConstF64(\r\n	uint length,\r\n	global double* a,\r\n	double b,\r\n	global double* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] - b;\r\n	}\r\n}\r\nkernel void mulConstF32(\r\n	uint length,\r\n	global float* a,\r\n	float b,\r\n	global float* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] * b;\r\n	}\r\n}\r\nkernel void mulConstF64(\r\n	uint length,\r\n	global double* a,\r\n	double b,\r\n	global double* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] * b;\r\n	}\r\n}\r\nkernel void divConstF32(\r\n	uint length,\r\n	global float* a,\r\n	float b,\r\n	global float* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] / b;\r\n	}\r\n}\r\nkernel void divConstF64(\r\n	uint length,\r\n	global double* a,\r\n	double b,\r\n	global double* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = a[id] / b;\r\n	}\r\n}\r\nkernel void negF32(\r\n	uint length,\r\n	global float* a,\r\n	global float* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = -a[id];\r\n	}\r\n}\r\nkernel void negF64(\r\n	uint length,\r\n	global double* a,\r\n	global double* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = -a[id];\r\n	}\r\n}\r\nkernel void absF32(\r\n	uint length,\r\n	global float* a,\r\n	global float* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = fabs(a[id]);\r\n	}\r\n}\r\nkernel void absF64(\r\n	uint length,\r\n	global double* a,\r\n	global double* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = fabs(a[id]);\r\n	}\r\n}\r\nkernel void expF32(\r\n	uint length,\r\n	global float* a,\r\n	global float* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = exp(a[id]);\r\n	}\r\n}\r\nkernel void expF64(\r\n	uint length,\r\n	global double* a,\r\n	global double* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = exp(a[id]);\r\n	}\r\n}\r\nkernel void logF32(\r\n	uint length,\r\n	global float* a,\r\n	global float* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = log(a[id]);\r\n	}\r\n}\r\nkernel void logF64(\r\n	uint length,\r\n	global double* a,\r\n	global double* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = log(a[id]);\r\n	}\r\n}\r\nkernel void sqrtF32(\r\n	uint length,\r\n	global float* a,\r\n	global float* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = sqrt(a[id]);\r\n	}\r\n}\r\nkernel void sqrtF64(\r\n	uint length,\r\n	global double* a,\r\n	global double* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		out[id] = sqrt(a[id]);\r\n	}\r\n}\r\nkernel void squareF32(\r\n	uint length,\r\n	global float* a,\r\n	global float* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		const float aVal = a[id]; \r\n		out[id] = aVal * aVal;\r\n	}\r\n}\r\nkernel void squareF64(\r\n	uint length,\r\n	global double* a,\r\n	global double* out)\r\n{\r\n	const uint id = get_global_id(0);\r\n	if (id < length) {\r\n		const double aVal = a[id];\r\n		out[id] = aVal * aVal;\r\n	}\r\n}\r\n",n=p.getPlatforms(),d=n[0],i=d.getDevices(p.DEVICE_TYPE_ALL),t=i[0];
s=p.createContext(t),y=s.createCommandQueue();var u=s.createProgram(o);try{u.build([t])}catch(l){if("INVALID_DEVICE"!==l.name)throw l;u.build()}w.f32=u.createKernel("setF32"),w.f64=u.createKernel("setF64"),c.add.f32=u.createKernel("addF32"),c.add.f64=u.createKernel("addF64"),c.sub.f32=u.createKernel("subF32"),c.sub.f64=u.createKernel("subF64"),c.mul.f32=u.createKernel("mulF32"),c.mul.f64=u.createKernel("mulF64"),c.div.f32=u.createKernel("divF32"),c.div.f64=u.createKernel("divF64"),r.add.f32=u.createKernel("addConstF32"),r.add.f64=u.createKernel("addConstF64"),r.sub.f32=u.createKernel("subConstF32"),r.sub.f64=u.createKernel("subConstF64"),r.mul.f32=u.createKernel("mulConstF32"),r.mul.f64=u.createKernel("mulConstF64"),r.div.f32=u.createKernel("divConstF32"),r.div.f64=u.createKernel("divConstF64"),a.neg.f32=u.createKernel("negF32"),a.neg.f64=u.createKernel("negF64"),a.abs.f32=u.createKernel("absF32"),a.abs.f64=u.createKernel("absF64"),a.exp.f32=u.createKernel("expF32"),a.exp.f64=u.createKernel("expF64"),a.log.f32=u.createKernel("logF32"),a.log.f64=u.createKernel("logF64"),a.sqrt.f32=u.createKernel("sqrtF32"),a.sqrt.f64=u.createKernel("sqrtF64"),a.square.f32=u.createKernel("squareF32"),a.square.f64=u.createKernel("squareF64")}f(this)}var n=e("../NDArray"),d=e("../DataType"),i=e("../util"),t=function(e,f){if(e.length!==f.length)return!1;for(var o=0;o<e.length;o++)if(e[o]!==f[o])return!1;return!0},u=!1,l=!1,p="object"==typeof window?window.webcl:void 0,s=null,y=null,c={add:{},sub:{},mul:{},div:{}},r={add:{},sub:{},mul:{},div:{}},a={neg:{},abs:{},exp:{},log:{},sqrt:{},square:{}},w={};o.prototype.empty=function(e,f){if(e=i.checkShape(e),"undefined"==typeof f)f=new d("f64");else if(!(f instanceof d))throw new TypeError(f+" is not an instance of DataType");var o=new n(e,f,this);return o._buffer=s.createBuffer(p.MEM_READ_WRITE,o.length*f.size),o},o.prototype.zeros=function(e,f){if(e=i.checkShape(e),"undefined"==typeof f)f=new d("f64");else if(!(f instanceof d))throw new TypeError(f+" is not an instance of DataType");var o=new n(e,f,this);o._buffer=s.createBuffer(p.MEM_READ_WRITE,o.length*f.size);var t=w[f.type];return t.setArg(0,new Uint32Array([o.length])),t.setArg(1,o._buffer),t.setArg(2,new f.arrayType([0])),y.enqueueNDRangeKernel(t,1,null,[o.length]),o},o.prototype.array=function(e,f){f="undefined"==typeof f?new d("f64"):i.checkDataType(f);var o=[];i.discoverArrayShapeRecursive(e,o,0);var t=new n(o,f,this),u=new f.arrayType(t.length);return i.copyArrayDataRecursive(u,e,o,0,0),l?t._buffer=s.createBuffer(p.MEM_READ_WRITE,u.byteLength,u):(t._buffer=s.createBuffer(p.MEM_READ_WRITE,u.byteLength),y.enqueueWriteBuffer(t._buffer,!1,0,u.byteLength,u)),t},o.prototype._invalidate=function(e){null!==e._buffer&&("undefined"!=typeof e._buffer.release&&e._buffer.release(),e._buffer=null)},o.prototype.get=function(){if(0===arguments.length)throw new Error("Callback argument missing");var e=arguments[arguments.length-1];if(1===arguments.length)throw new Error("At least one NDArray argument expected");for(var f=0;f<arguments.length-1;f++)if(!(arguments[f]instanceof n))throw new TypeError("Argument "+f+" is not an NDArray");var o=arguments.length-1,d=new Array(o);if(u)for(var f=0;o>f;f++){var t=arguments[f];!function(f,n,i){var u=new i(length),l=new WebCLEvent;y.enqueueReadBuffer(t._buffer,!1,0,u.byteLength,u,null,l),0===n.length?l.setCallback(p.COMPLETE,function(){l.release(),d[f]=typedArray[0],0===--o&&e.apply(null,d)}):l.setCallback(p.COMPLETE,function(){l.release();var t=new Array(n[0]);createArrayRecursive(new i(u),t,n,0,0),d[f]=t,0===--o&&e.apply(null,d)})}(f,t.shape,t.dataType.arrayType)}else{for(var f=0;o>f;f++){var t=arguments[f],l=new t.dataType.arrayType(t.length);if(y.enqueueReadBuffer(t._buffer,!0,0,l.byteLength,l),0===t.shape.length)d[f]=typedArray[0];else{var s=new Array(t.shape[0]);i.createArrayRecursive(new t.dataType.arrayType(l),s,t.shape,0,0),d[f]=s}}e.apply(null,d)}};var b=function(e,f,o,d,u){var l=null,p=null;if(!(e instanceof n))throw new TypeError("Unsupported type of a");if(l=e.shape,p=e.dataType,f instanceof n){if(!t(l,f.shape))throw new Error("The a and b arrays have incompatible shapes")}else if(!i.isNumber(f))throw new TypeError("Unsupported type of b");if("undefined"==typeof o)o=d.empty(l,p);else{if(!(o instanceof n))throw new TypeError("out is not an NDArray");if(!t(l,o.shape))throw new Error("The out array has incompatible shape")}if(e instanceof n)if(f instanceof n){var s=c[u][p.type];s.setArg(0,new Uint32Array([o.length])),s.setArg(1,e._buffer),s.setArg(2,f._buffer),s.setArg(3,o._buffer),y.enqueueNDRangeKernel(s,1,null,[o.length])}else{var s=r[u][p.type];s.setArg(0,new Uint32Array([o.length])),s.setArg(1,e._buffer),s.setArg(2,new e.dataType.arrayType([f])),s.setArg(3,o._buffer),y.enqueueNDRangeKernel(s,1,null,[o.length])}return o},m=function(e,f,o,d){var i=null,u=null;if(!(e instanceof n))throw new TypeError("Unsupported type of a");if(i=e.shape,u=e.dataType,"undefined"==typeof f)f=o.empty(i,u);else{if(!(f instanceof n))throw new TypeError("out is not an NDArray");if(!t(i,f.shape))throw new Error("The out array has incompatible shape")}var l=a[d][u.type];return l.setArg(0,new Uint32Array([f.length])),l.setArg(1,e._buffer),l.setArg(2,f._buffer),y.enqueueNDRangeKernel(l,1,null,[f.length]),f};o.prototype.add=function(e,f,o){return b(e,f,o,this,"add")},o.prototype.sub=function(e,f,o){return b(e,f,o,this,"sub")},o.prototype.mul=function(e,f,o){return b(e,f,o,this,"mul")},o.prototype.div=function(e,f,o){return b(e,f,o,this,"div")},o.prototype.neg=function(e,f){return m(e,f,this,"neg")},o.prototype.abs=function(e,f){return m(e,f,this,"abs")},o.prototype.exp=function(e,f){return m(e,f,this,"exp")},o.prototype.log=function(e,f){return m(e,f,this,"log")},o.prototype.sqrt=function(e,f){return m(e,f,this,"sqrt")},o.prototype.square=function(e,f){return m(e,f,this,"square")},f.exports=o},{"../DataType":1,"../NDArray":3,"../util":8}]},{},[6])(6)});